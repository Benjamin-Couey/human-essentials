<div data-controller="deadline-day">

  <%= f.label :every_nth_month, 'How frequently should reminders be sent (e.g. "monthly", "every 3 months", etc.)?' %>
  <%= f.input :every_nth_month,
    collection: Deadlinable::EVERY_NTH_MONTH_COLLECTION,
    class: "form-control",
    label: false,
    show_blank: true,
    default: 1,
    input_html: {style: 'width: 200px', "data-deadline-day-target" => "everyNthMonth", "data-action" => "deadline-day#sourceChange"} %>

  <%= f.label :start_date, 'Reminder start being sent after:' %>
  <%= f.input :start_date,
    as: :date,
    label: false,
    html5: true,
    wrapper: :input_group,
    input_html: {"data-deadline-day-target" => "startDate", "data-action" => "deadline-day#sourceChange"} %>

  <%= f.label :by_month_or_week, 'Send reminders on a specific day of the month (e.g. "the 5th") or a day of the week (eg "the first Tuesday")?' %>
  <br>
  <%= f.radio_button :by_month_or_week,
    'day_of_month',
    label: 'Day of Month',
    data: { 'deadline-day-target': 'byDayOfMonth', 'action': 'deadline-day#monthOrWeekChanged deadline-day#sourceChange' } %>
  <%= f.label :by_month_or_week_day_of_month, 'Day of Month' %>
  <br>
  <%= f.radio_button :by_month_or_week,
    'day_of_week',
    label: 'Day of the Week',
    data: { 'deadline-day-target': 'byDayOfWeek', 'action': 'deadline-day#monthOrWeekChanged deadline-day#sourceChange' } %>
  <%= f.label :by_month_or_week_day_of_week, 'Day of the Week' %>

  <div data-deadline-day-target="dayOfMonthFields">
    <%= f.input :day_of_month, as: :integer, wrapper: :input_group, label: 'Reminder date' do %>
      <span class="input-group-text"><i class="fa fa-calendar"></i></span>
      <%= f.number_field :day_of_month,
        min: Deadlinable::MIN_DAY_OF_MONTH,
        max: Deadlinable::MAX_DAY_OF_MONTH,
        class: "form-control",
        placeholder: "Reminder day",
        data: { 'deadline-day-target': 'dayOfMonth', 'action': 'deadline-day#sourceChange' } %>
    <% end %>
  </div>

  <div data-deadline-day-target="dayOfWeekFields">
    <%= f.label :every_nth_day, 'Reminder day of the week' %>
    <div class="input-group">
      <%= f.input :every_nth_day,
      collection: Deadlinable::EVERY_NTH_COLLECTION,
      class: "form-control",
      label: false,
      input_html: {"data-deadline-day-target" => "everyNthDay", "data-action" => "deadline-day#sourceChange"} %>

      <%= f.input :day_of_week,
        collection: Deadlinable::DAY_OF_WEEK_COLLECTION,
        class: "form-control",
        label: false,
        show_blank: true,
        default: 1,
        input_html: {style: 'width: 200px', "data-deadline-day-target" => "dayOfWeek", "data-action" => "deadline-day#sourceChange"} %>
    </div>
  </div>
  <small class="mb-3 d-block text-muted" data-deadline-day-target="reminderText"></small>

  <%= f.input :deadline_day, wrapper: :input_group, wrapper_html: { min: 0, max: 28 }, label: 'Default deadline day (final day of month to submit Requests)' do %>
    <span class="input-group-text"><i class="fa fa-calendar"></i></span>
    <%= f.number_field :deadline_day,
      min: Deadlinable::MIN_DAY_OF_MONTH,
      max: Deadlinable::MAX_DAY_OF_MONTH,
      class: "form-control",
      placeholder: "Deadline day",
      data: {"deadline-day-target": "deadlineDay", "action": "deadline-day#sourceChange"} %>
  <% end %>
  <small class="mb-3 d-block text-muted" data-deadline-day-target="deadlineText"></small>
</div>
